# Santa Package Manager Check Script
# Generated: {{ timestamp }}
# Version: {{ version }}
# Source: {{ source_name }}
# Manager: {{ manager }}

$ErrorActionPreference = "Stop"

Write-Host "üéÖ Santa Package Check - {{ source_name }}" -ForegroundColor Green
Write-Host "Generated: {{ timestamp }}" -ForegroundColor Gray
Write-Host "Manager: {{ manager }}" -ForegroundColor Gray
Write-Host ""

{% if manager == "scoop" %}
# Scoop package check
if (Get-Command scoop -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking Scoop packages..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  Scoop not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "choco" or manager == "chocolatey" %}
# Chocolatey package check
if (Get-Command choco -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking Chocolatey packages..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  Chocolatey not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "winget" %}
# Windows Package Manager check
if (Get-Command winget -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking packages with Windows Package Manager..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  Windows Package Manager (winget) not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "npm" %}
# NPM package check
if (Get-Command npm -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking NPM packages..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  NPM not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "pip" or manager == "pip3" %}
# Python pip package check
if (Get-Command {{ manager }} -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking Python packages with {{ manager }}..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  {{ manager }} not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "cargo" %}
# Rust cargo package check
if (Get-Command cargo -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking Rust packages..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  Cargo not found." -ForegroundColor Red
    exit 1
}

{% elif manager == "go" %}
# Go package check
if (Get-Command go -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking Go packages..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  Go not found." -ForegroundColor Red
    exit 1
}

{% else %}
# Generic package manager check
if (Get-Command {{ manager }} -ErrorAction SilentlyContinue) {
    Write-Host "üì¶ Checking packages with {{ manager }}..." -ForegroundColor Yellow
    & {{ check_command | powershell_escape }}
} else {
    Write-Host "‚ö†Ô∏è  {{ manager }} not found." -ForegroundColor Red
    exit 1
}
{% endif %}

Write-Host ""
Write-Host "Generated by Santa v{{ version }} - https://github.com/tylerbutler/santa" -ForegroundColor Gray