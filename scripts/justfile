# Justfile for CLI tool harvester

# Set shell to bash
set shell := ["bash", "-cu"]

# Create virtual environment
venv:
	uv venv

# Install dependencies from pyproject.toml
sync:
	uv sync

# Lock dependencies (creates uv.lock)
lock:
	uv lock

# Run the legacy script
run:
	uv run python collect-packages.py

# Collect packages from all sources
collect-all:
	uv run python collect_all.py

# Collect from specific source(s)
collect *sources:
	uv run python collect_all.py --sources {{sources}}

# Collect from all sources except slow ones (scoop, flathub)
collect-fast:
	uv run python collect_all.py --skip scoop flathub

# List available collectors
collect-list:
	uv run python collect_all.py --list

# Format code with Ruff
format:
	ruff format .

# Lint and auto-fix
lint:
	ruff check . --fix

# Full setup
setup:
	uv sync

# Clean environment
clean:
	rm -rf .venv uv.lock
